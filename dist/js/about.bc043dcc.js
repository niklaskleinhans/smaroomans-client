(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"2fdb":function(o,t,s){"use strict";var e=s("5ca1"),n=s("d2c8"),r="includes";e(e.P+e.F*s("5147")(r),"String",{includes:function(o){return!!~n(this,o,r).indexOf(o,arguments.length>1?arguments[1]:void 0)}})},5147:function(o,t,s){var e=s("2b4c")("match");o.exports=function(o){var t=/./;try{"/./"[o](t)}catch(s){try{return t[e]=!1,!"/./"[o](t)}catch(n){}}return!0}},6762:function(o,t,s){"use strict";var e=s("5ca1"),n=s("c366")(!0);e(e.P,"Array",{includes:function(o){return n(this,o,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")("includes")},aae3:function(o,t,s){var e=s("d3f4"),n=s("2d95"),r=s("2b4c")("match");o.exports=function(o){var t;return e(o)&&(void 0!==(t=o[r])?!!t:"RegExp"==n(o))}},d2c8:function(o,t,s){var e=s("aae3"),n=s("be13");o.exports=function(o,t,s){if(e(t))throw TypeError("String#"+s+" doesn't accept regex!");return String(n(o))}},f97d:function(o,t,s){"use strict";s.r(t);var e=function(){var o=this,t=o.$createElement,s=o._self._c||t;return s("v-container",{staticClass:"system",attrs:{fluid:""}},[s("v-layout",[s("v-flex",{attrs:{md5:""}},[s("v-card",[s("v-container",{attrs:{fluid:"","grid-list-md":""}},[s("v-layout",{attrs:{row:"",wrap:""}},o._l(o.rooms,function(t,e){return s("v-flex",{key:e,attrs:{"d-flex":"",md2:""}},[s("v-card",{attrs:{color:t.active?"green":"red"}},[s("v-card-title",[o._v(o._s(t.key))]),s("v-card-actions",[s("v-btn",{attrs:{flat:"",color:"info"},on:{click:function(s){return o.showInfo(t)}}},[o._v("Info")])],1)],1)],1)}),1)],1)],1)],1),s("v-spacer"),s("v-flex",{attrs:{md6:""}},[o.roomInfo.room?s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[o._v(o._s(o.roomInfo.room))]),o._v("\n        maxStaff: "+o._s(o.roomInfo.maxStaff)+"\n        "),s("v-data-table",{attrs:{headers:o.headers,items:o.roomInfo.sensors,"rows-per-page-text":"25","hide-actions":""},scopedSlots:o._u([{key:"items",fn:function(t){return[s("td",[o._v(o._s(t.item.sensortype))]),s("td",[o._v(o._s(t.item.data[Object.keys(t.item.data)[0]]))])]}}],null,!1,2071302022)})],1):o._e()],1)],1)],1)},n=[],r=s("cebc"),a=(s("6762"),s("2fdb"),s("2f62")),c=s("bc3a"),i=s.n(c),l=s("34eb"),u=s.n(l),f=s("e7fc"),m=s.n(f),d={name:"System",data:function(){return{baseUrl:"http://",client:{},mqtt:s("e7fc"),roomInfo:{room:null,maxStaff:null,sensors:[]},rooms:{},headers:[{text:"name",align:"left",value:"key"},{text:"value",align:"left",sortable:!1,value:"key"}],subscriptions:[]}},methods:{showInfo:function(o){var t=this;for(var s in this.roomInfo.sensors=[],this.roomInfo.room=o.key,this.roomInfo.maxStaff=o.maxStaff,this.subscriptions)this.client.unsubscribe(this.subscriptions[s]);this.subscriptions=[],i.a.get(this.baseUrl+"/api/roomsensors/"+o.key).then(function(s){console.log("GET request: /api/roomsensors/"+o.key+" success"),console.log(s);var e=s.data.sensors;for(var n in e)null==e[n].sensortopic||t.subscriptions.includes(e[n].sensortopic)||(t.client.subscribe(e[n].sensortopic),t.subscriptions.push(e[n].sensortopic))}).catch(function(o){console.log(o)})}},mounted:function(){var o=this;u.a?this.baseUrl="http://localhost:5000":this.baseUrl+=location.host,i.a.get(this.baseUrl+"/api/allrooms").then(function(t){console.log("GET request: /api/allrooms/ success"),console.log(t),o.rooms=t.data.rooms}).catch(function(o){console.error(o)}),this.client=m.a.connect("mqtt://192.168.0.230:1884"),this.client.on("connect",function(){console.log("User - succesfully connected mqtt")});var t=this;this.client.on("message",function(o,s){console.log("mqtt message: '"+o+"' received");var e=JSON.parse(s);if(null!=e.room&&e.room==t.roomInfo.room&&null!=e.sensortype){var n=!1;for(var r in t.roomInfo.sensors)if(t.roomInfo.sensors[r].key==e.key){n=!0;var a=t.roomInfo.sensors.indexOf(t.roomInfo.sensors[r]);t.roomInfo.sensors.splice(a,1),t.roomInfo.sensors.push(e);break}n||t.roomInfo.sensors.push(e)}})},computed:Object(r["a"])({},Object(a["c"])(["getDate"]),{date:{get:function(){return this.getDate}}}),watch:{date:function(){var o=this;i.a.get(this.baseUrl+"/api/allrooms").then(function(t){console.log("new date"),console.log("GET request: /api/allrooms/ success"),console.log(t),o.rooms=t.data.rooms}).catch(function(o){console.error(o)})}}},h=d,v=s("2877"),p=Object(v["a"])(h,e,n,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=about.bc043dcc.js.map