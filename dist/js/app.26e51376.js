(function(t){function e(e){for(var n,a,c=e[0],i=e[1],u=e[2],l=0,d=[];l<c.length;l++)a=c[l],o[a]&&d.push(o[a][0]),o[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);f&&f(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(s.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},o={app:0},s=[];function a(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"4fcf56a0"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(t){var e=[],r=o[t];if(0!==r)if(r)e.push(r[2]);else{var n=new Promise(function(e,n){r=o[t]=[e,n]});e.push(r[2]=n);var s,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=a(t),s=function(e){i.onerror=i.onload=null,clearTimeout(u);var r=o[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,a=new Error("Loading chunk "+t+" failed.\n("+n+": "+s+")");a.type=n,a.request=s,r[1](a)}o[t]=void 0}};var u=setTimeout(function(){s({type:"timeout",target:i})},12e4);i.onerror=i.onload=s,document.head.appendChild(i)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var f=u;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("64a9"),o=r.n(n);o.a},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Header"),r("router-view")],1)},s=[],a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-toolbar",{staticClass:"header"},[r("v-spacer"),r("v-toolbar-title",[t._v("Smart Room Management System")]),r("v-spacer"),r("v-toolbar-items",[r("router-link",{attrs:{to:"/",tag:"button"}},[r("v-btn",{attrs:{flat:""}},[t._v("User")])],1),r("router-link",{attrs:{to:"/system",tag:"button"}},[r("v-btn",{attrs:{flat:""}},[t._v("System")])],1)],1),r("v-spacer"),r("div",{attrs:{"data-app":""}},[r("v-combobox",{attrs:{items:t.users,"item-text":"key","item-value":"workplan","prepend-icon":"fa-user"},model:{value:t.currentUser,callback:function(e){t.currentUser=e},expression:"currentUser"}})],1),r("v-spacer")],1)},c=[],i=r("cebc"),u=r("2f62"),l=r("bc3a"),f=r.n(l),d=r("34eb"),p=r.n(d),v={name:"Header",data:function(){return{baseUrl:"http://"}},methods:Object(i["a"])({},Object(u["b"])(["setUsers","setCurrentUser"])),computed:Object(i["a"])({},Object(u["c"])(["getUsers","getCurrentUser"]),{users:{get:function(){return this.getUsers},set:function(t){this.setUsers(t)}},currentUser:{get:function(){return this.getCurrentUser},set:function(t){this.setCurrentUser(t)}}}),mounted:function(){var t=this;p.a?this.baseUrl="http://localhost:5000":this.baseUrl+=location.host,f.a.get(this.baseUrl+"/api/allusers").then(function(e){console.log(e),t.setUsers(e.data.users)}).catch(function(t){console.log(t)})}},b=v,m=(r("8baf"),r("2877")),h=Object(m["a"])(b,a,c,!1,null,null,null),U=h.exports,g={name:"app",components:{Header:U},mounted:function(){p.a}},y=g,_=(r("034f"),Object(m["a"])(y,o,s,!1,null,null,null)),w=_.exports,O=r("8c4f"),S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{md6:""}},[r("v-card",[r("v-card-title",{attrs:{"primary-title":""}},[t._v("Home Office Planner")]),r("v-date-picker",{attrs:{color:"green",multiple:"",scrollable:"","first-day-of-week":"1",disabled:!t.currentUser},model:{value:t.currentUser.workplan,callback:function(e){t.$set(t.currentUser,"workplan",e)},expression:"currentUser.workplan"}})],1),r("v-card",[r("v-btn",{attrs:{disabled:!t.currentUser},on:{click:function(e){return t.saveUserPlan(t.currentUser)}}},[r("v-icon",[t._v("save")])],1)],1)],1),r("v-flex",{attrs:{"offset-md2":"",md4:""}},[r("v-card",[r("v-card-title",[t._v("Notifications")]),t._l(t.notifications,function(e,n){return r("v-card",{key:n,attrs:{color:"grey lighten-2",hover:""}},[r("v-card-title",{attrs:{"primary-title":""}},[t._v(t._s(e.text))]),r("v-card-actions",[r("v-flex",{attrs:{"offset-md9":"",md2:""}},[e.topic?r("v-btn",{on:{click:function(r){return t.doAction(e.topic,e.topicdata)}}},[t._v("Accept")]):t._e()],1)],1)],1)})],2)],1)],1)],1)},j=[],k={name:"User",data:function(){return{baseUrl:"http://",notifications:[],dates:[]}},methods:Object(i["a"])({},Object(u["b"])(["setCurrentUser"]),{saveUserPlan:function(t){f.a.put(this.baseUrl+"/api/setuserplan",t).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},doAction:function(t,e){this.$mqtt.publish(t,JSON.stringify(e)),console.log("published: "+t+" "+JSON.stringify(e))},function:function(t){console.log("succesfully connected with: ",t)}}),computed:Object(i["a"])({},Object(u["c"])(["getCurrentUser"]),{currentUser:{get:function(){return this.getCurrentUser},set:function(t){this.setCurrentUser(t)}}}),mounted:function(){p.a?this.baseUrl="http://localhost:5000":this.baseUrl+=location.host,this.$mqtt.subscribe("client/notifications");var t=this;this.$mqtt.on("message",function(e,r){console.log("mqtt message: '"+e+"' received");var n=JSON.parse(r);console.log(n),n.user==t.currentUser.key&&(t.notifications=n.data)})},beforeDestroy:function(){console.log("destroying now!"),this.$mqtt.unsubscribe("client/notifications"),this.notifications=[]},mqtt:{}},x=k,E=Object(m["a"])(x,S,j,!1,null,null,null),C=E.exports;n["default"].use(O["a"]);var P=new O["a"]({routes:[{path:"/",name:"User",component:C},{path:"/system",name:"System",component:function(){return r.e("about").then(r.bind(null,"f97d"))}}]}),T={setCurrentUser:function(t,e){var r=t.commit;r("SET_CURRENT_USER",e)},setUsers:function(t,e){var r=t.commit;r("SET_USERS",e)}},R={SET_CURRENT_USER:function(t,e){t.currentUser=e},SET_USERS:function(t,e){t.users=e}},$={getUsers:function(t){return t.users},getCurrentUser:function(t){return t.currentUser}};n["default"].use(u["a"]);var q=new u["a"].Store({state:{users:[],currentUser:null},mutations:R,actions:T,getters:$}),N=r("ce5b"),J=r.n(N),M=(r("bf40"),r("daa7")),A=r.n(M);r("15f5"),r("d1e7");n["default"].use(A.a,"ws://192.168.0.230:1884",{}),n["default"].use(J.a,{iconfont:"md"}),n["default"].config.productionTip=!1;var H=!1,D="http://";H?D="http://localhost:5000":D+=location.host;var L=D,z=r("bc3a");new n["default"]({router:P,store:q,axios:z,debug:H,baseUrl:L,render:function(t){return t(w)}}).$mount("#app")},"64a9":function(t,e,r){},"782e":function(t,e,r){},"8baf":function(t,e,r){"use strict";var n=r("782e"),o=r.n(n);o.a}});
//# sourceMappingURL=app.26e51376.js.map