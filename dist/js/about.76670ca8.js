(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"2fdb":function(o,t,s){"use strict";var n=s("5ca1"),e=s("d2c8"),r="includes";n(n.P+n.F*s("5147")(r),"String",{includes:function(o){return!!~e(this,o,r).indexOf(o,arguments.length>1?arguments[1]:void 0)}})},5147:function(o,t,s){var n=s("2b4c")("match");o.exports=function(o){var t=/./;try{"/./"[o](t)}catch(s){try{return t[n]=!1,!"/./"[o](t)}catch(e){}}return!0}},6762:function(o,t,s){"use strict";var n=s("5ca1"),e=s("c366")(!0);n(n.P,"Array",{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")("includes")},aae3:function(o,t,s){var n=s("d3f4"),e=s("2d95"),r=s("2b4c")("match");o.exports=function(o){var t;return n(o)&&(void 0!==(t=o[r])?!!t:"RegExp"==e(o))}},d2c8:function(o,t,s){var n=s("aae3"),e=s("be13");o.exports=function(o,t,s){if(n(t))throw TypeError("String#"+s+" doesn't accept regex!");return String(e(o))}},f97d:function(o,t,s){"use strict";s.r(t);var n=function(){var o=this,t=o.$createElement,s=o._self._c||t;return s("v-container",{staticClass:"system",attrs:{fluid:""}},[s("v-layout",[s("v-flex",{attrs:{md5:""}},[s("v-card",[s("v-container",{attrs:{fluid:"","grid-list-md":""}},[s("v-layout",{attrs:{row:"",wrap:""}},o._l(o.rooms,function(t,n){return s("v-flex",{key:n,attrs:{"d-flex":"",md2:""}},[s("v-card",{attrs:{color:t.active?"green":"red"}},[s("v-card-title",[o._v(o._s(t.key))]),s("v-card-actions",[s("v-btn",{attrs:{flat:"",color:"info"},on:{click:function(s){return o.showInfo(t)}}},[o._v("Info")])],1)],1)],1)}),1)],1)],1)],1),s("v-spacer"),s("v-flex",{attrs:{md6:""}},[o.roomInfo.room?s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[o._v(o._s(o.roomInfo.room))]),o._v("\n        maxStaff: "+o._s(o.roomInfo.maxStaff)+"\n        "),s("v-data-table",{attrs:{headers:o.headers,items:o.roomInfo.sensors,"rows-per-page-text":"25","hide-actions":""},scopedSlots:o._u([{key:"items",fn:function(t){return[s("td",[o._v(o._s(t.item.sensortype))]),s("td",[o._v(o._s(t.item.data[Object.keys(t.item.data)[0]]))])]}}],null,!1,2071302022)})],1):o._e()],1)],1)],1)},e=[],r=(s("6762"),s("2fdb"),s("bc3a")),a=s.n(r),i=s("34eb"),c=s.n(i),l=s("e7fc"),u=s.n(l),f={name:"System",data:function(){return{baseUrl:"http://",client:{},mqtt:s("e7fc"),roomInfo:{room:null,maxStaff:null,sensors:[]},rooms:{},headers:[{text:"name",align:"left",value:"key"},{text:"value",align:"left",sortable:!1,value:"key"}],subscriptions:[]}},methods:{showInfo:function(o){var t=this;for(var s in this.roomInfo.sensors=[],this.roomInfo.room=o.key,this.roomInfo.maxStaff=o.maxStaff,this.subscriptions)this.client.unsubscribe(this.subscriptions[s]);this.subscriptions=[],a.a.get(this.baseUrl+"/api/roomsensors/"+o.key).then(function(s){console.log("GET request: /api/roomsensors/"+o.key+" success"),console.log(s);var n=s.data.sensors;for(var e in n)null==n[e].sensortopic||t.subscriptions.includes(n[e].sensortopic)||(t.client.subscribe(n[e].sensortopic),t.subscriptions.push(n[e].sensortopic))}).catch(function(o){console.log(o)})}},mounted:function(){var o=this;c.a?this.baseUrl="http://localhost:5000":this.baseUrl+=location.host,a.a.get(this.baseUrl+"/api/allrooms").then(function(t){console.log("GET request: /api/allrooms/ success"),console.log(t),o.rooms=t.data.rooms}).catch(function(o){console.log(o)}),this.client=u.a.connect("mqtt://192.168.0.230:1884"),this.client.on("connect",function(){console.log("User - succesfully connected mqtt")});var t=this;this.client.on("message",function(o,s){console.log("mqtt message: '"+o+"' received");var n=JSON.parse(s);if(null!=n.room&&n.room==t.roomInfo.room&&null!=n.sensortype){var e=!1;for(var r in t.roomInfo.sensors)if(t.roomInfo.sensors[r].key==n.key){e=!0;var a=t.roomInfo.sensors.indexOf(t.roomInfo.sensors[r]);t.roomInfo.sensors.splice(a,1),t.roomInfo.sensors.push(n);break}e||t.roomInfo.sensors.push(n)}})}},m=f,d=s("2877"),v=Object(d["a"])(m,n,e,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=about.76670ca8.js.map