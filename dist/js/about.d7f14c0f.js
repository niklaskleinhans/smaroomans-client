(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"2fdb":function(t,o,e){"use strict";var s=e("5ca1"),n=e("d2c8"),r="includes";s(s.P+s.F*e("5147")(r),"String",{includes:function(t){return!!~n(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},5147:function(t,o,e){var s=e("2b4c")("match");t.exports=function(t){var o=/./;try{"/./"[t](o)}catch(e){try{return o[s]=!1,!"/./"[t](o)}catch(n){}}return!0}},6762:function(t,o,e){"use strict";var s=e("5ca1"),n=e("c366")(!0);s(s.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),e("9c6c")("includes")},aae3:function(t,o,e){var s=e("d3f4"),n=e("2d95"),r=e("2b4c")("match");t.exports=function(t){var o;return s(t)&&(void 0!==(o=t[r])?!!o:"RegExp"==n(t))}},d2c8:function(t,o,e){var s=e("aae3"),n=e("be13");t.exports=function(t,o,e){if(s(o))throw TypeError("String#"+e+" doesn't accept regex!");return String(n(t))}},f97d:function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("v-container",{staticClass:"system",attrs:{fluid:""}},[e("v-layout",[e("v-flex",{attrs:{md5:""}},[e("v-card",[e("v-container",{attrs:{fluid:"","grid-list-md":""}},[e("v-layout",{attrs:{row:"",wrap:""}},t._l(t.rooms,function(o,s){return e("v-flex",{key:s,attrs:{"d-flex":"",md2:""}},[e("v-card",{attrs:{color:o.active?"green":"red"}},[e("v-card-title",[t._v(t._s(o.key))]),e("v-card-actions",[e("v-btn",{attrs:{flat:"",color:"info"},on:{click:function(e){return t.showInfo(o)}}},[t._v("Info")])],1)],1)],1)}),1)],1)],1),t.rooms?e("v-card",[e("v-data-table",{attrs:{headers:t.headersRoomUsers,items:t.rooms,"rows-per-page-text":"10","hide-actions":"","disable-initial-sort":""},scopedSlots:t._u([{key:"items",fn:function(o){return[e("td",[t._v(t._s(o.item.key))]),e("td",t._l(o.item.users,function(o,s){return e("v-card",{key:s,staticStyle:{margin:"10px","max-width":"100px"},attrs:{hover:""}},[t._v(t._s(o))])}),1)]}}],null,!1,1644191198)})],1):t._e()],1),e("v-spacer"),e("v-flex",{attrs:{md6:""}},[t.roomInfo.room?e("v-card",[e("v-card-title",{attrs:{"primary-title":""}},[t._v(t._s(t.roomInfo.room))]),t._v("\n        maxStaff: "+t._s(t.roomInfo.maxStaff)+"\n        "),e("v-data-table",{attrs:{headers:t.headersSensors,items:t.roomInfo.sensors,"rows-per-page-text":"25","hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(o){return[e("td",[t._v(t._s(o.item.sensortype))]),e("td",[t._v(t._s(o.item.data[Object.keys(o.item.data)[0]]))])]}}],null,!1,2071302022)})],1):t._e()],1)],1)],1)},n=[],r=e("cebc"),a=(e("6762"),e("2fdb"),e("2f62")),i=e("bc3a"),c=e.n(i),l=e("34eb"),u=e.n(l),f=e("e7fc"),m=e.n(f),d={name:"System",data:function(){return{baseUrl:"http://",client:{},mqtt:e("e7fc"),roomInfo:{room:null,maxStaff:null,sensors:[]},rooms:null,headersSensors:[{text:"name",align:"left",value:"key"},{text:"value",align:"left",sortable:!1,value:"key"}],subscriptions:[],headersRoomUsers:[{text:"room",align:"left",value:"key"},{text:"workers",align:"left",sortable:!1,value:"key"}]}},methods:{showInfo:function(t){var o=this;for(var e in this.roomInfo.sensors=[],this.roomInfo.room=t.key,this.roomInfo.maxStaff=t.maxStaff,this.subscriptions)this.client.unsubscribe(this.subscriptions[e]);this.subscriptions=[],c.a.get(this.baseUrl+"/api/roomsensors/"+t.key).then(function(e){console.log("GET request: /api/roomsensors/"+t.key+" success"),console.log(e);var s=e.data.sensors;for(var n in s)null==s[n].sensortopic||o.subscriptions.includes(s[n].sensortopic)||(o.client.subscribe(s[n].sensortopic),o.subscriptions.push(s[n].sensortopic))}).catch(function(t){console.log(t)})}},mounted:function(){var t=this;u.a?this.baseUrl="http://localhost:5000":this.baseUrl+=location.host,c.a.get(this.baseUrl+"/api/allrooms").then(function(o){console.log("GET request: /api/allrooms/ success"),console.log(o),t.rooms=o.data.rooms}).catch(function(t){console.error(t)}),this.client=m.a.connect("mqtt://192.168.0.230:1884"),this.client.on("connect",function(){console.log("User - succesfully connected mqtt")});var o=this;this.client.on("message",function(t,e){console.log("mqtt message: '"+t+"' received");var s=JSON.parse(e);if(null!=s.room&&s.room==o.roomInfo.room&&null!=s.sensortype){var n=!1;for(var r in o.roomInfo.sensors)if(o.roomInfo.sensors[r].key==s.key){n=!0;var a=o.roomInfo.sensors.indexOf(o.roomInfo.sensors[r]);o.roomInfo.sensors.splice(a,1),o.roomInfo.sensors.push(s);break}n||o.roomInfo.sensors.push(s)}})},computed:Object(r["a"])({},Object(a["c"])(["getDate"]),{date:{get:function(){return this.getDate}}}),watch:{date:function(){var t=this;c.a.get(this.baseUrl+"/api/allrooms").then(function(o){console.log("new date"),console.log("GET request: /api/allrooms/ success"),console.log(o),t.rooms=o.data.rooms}).catch(function(t){console.error(t)})}}},h=d,v=e("2877"),p=Object(v["a"])(h,s,n,!1,null,null,null);o["default"]=p.exports}}]);
//# sourceMappingURL=about.d7f14c0f.js.map